!function(e){function t(t){for(var r,o,s=t[0],c=t[1],l=t[2],p=0,m=[];p<s.length;p++)o=s[p],a[o]&&m.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);m.length;)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={6:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push(["./src/entrypoints/hydration/search.tsx",1,0]),n()}({"./src/dvui/components/Beard/Beard.module.scss":function(e,t,n){e.exports={beardContainer:"_1urAnv",lines:"bYT-oJ",actions:"_21ZTCj",beard:"EvsB0Y",twoLines:"_2tbywG",primeLogo:"YXkzlN",firstLine:"_1nFYVz",secondLine:"eKN4TI",extension:"_2YiBwf",thirdLine:"_3F7M7O",contentBlock:"_1oIHeC"}},"./src/dvui/components/Beard/Beard.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r,a=n("./node_modules/react/index.js"),i=n("./src/dvui/components/Common/extractClassNamesFromProps.ts"),o=n("./src/dvui/components/Beard/Beard.module.scss"),s=n("./node_modules/classnames/index.js"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});n("./src/dvui/components/base.module.scss");var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayName="Beard",t}return c(t,e),t.prototype.render=function(){var e,t=Object(i.a)(this.props,o.beardContainer,"dvui-beardContainer"),n=s(o.beard,"mustache",((e={})[o.twoLines]=Boolean(this.props.secondLine),e));return a.createElement("div",{className:t},this.props.children,a.createElement("div",{className:n},a.createElement("div",{className:o.lines},a.createElement("div",{className:o.firstLine},a.createElement("span",{className:o.title},this.props.title)),this.props.secondLine&&a.createElement("div",{className:s(o.secondLine,"dvui-beard-second-line")},this.props.secondLine),(this.props.thirdLine||this.props.contentBlock)&&a.createElement("div",{className:o.extension},this.props.thirdLine&&a.createElement("div",{className:o.thirdLine},this.props.thirdLine),this.props.contentBlock&&a.createElement("p",{className:o.contentBlock},this.props.contentBlock))),this.props.actions&&a.createElement("div",{className:o.actions},this.props.actions)))},t.defaultProps={secondLine:!1,thirdLine:!1,contentBlock:!1},t}(a.Component)},"./src/entrypoints/hydration/search.tsx":function(e,t,n){"use strict";n.r(t);var r,a,i=n("./src/util/hydration/hydrateWidgets.tsx"),o=(n("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),n("./node_modules/react/index.js")),s=n("./src/util/wrappers/ArgsContext.tsx"),c=function(e){if(e.customerID&&e.locale)return{marketplaceId:e.marketplaceID,customerId:e.customerID,sessionId:e.sessionID,locale:e.locale}},l=function(e){return null!=e.href?function(e){return{type:"PageNumber",text:e.text,title:e.title,isOptional:Boolean(Number(e.isOptional)),href:e.href}}(e):function(e){return{type:"CurrentPage",text:e.text,title:e.title}}(e)},u=function(e){switch(e.__type){case"atv.wps#PaginatorPrevious":return function(e){return{type:"PreviousPage",href:e.href,title:e.title}}(e);case"atv.wps#PaginatorNext":return function(e){return{type:"NextPage",href:e.href,title:e.title}}(e);case"atv.wps#PaginatorGap":return{type:"PageGap"};default:return l(e)}},p=function(e){if(null!=e)return{endpoint:e.endpoint,paginator:e.paginator.map(u)}},m=n("./src/dvui/components/Icon/Icon.tsx"),d=n("./src/dvui/components/Badge/Badge.tsx"),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};(a=r||(r={})).AmazonMaturityRatingBadge="AmazonMaturityRatingBadge",a.TextRatingBadge="TextRatingBadge",a.LocalRatingBadge="LocalRatingBadge";var h,v=function(e){var t=e.displayText;return o.createElement("span",{className:"av-amazon-maturity-rating-badge"},t)},y=function(e){var t=e.description,n=e.displayText;return o.createElement(d.a,{className:"av-text-rating-badge",use:d.b.REGULATORY_RATING,title:t},n.toUpperCase())},g=function(e){var t=Object(m.c)(e.countryCode,e.simplifiedId);return t?o.createElement("span",{className:"av-local-rating-badge"},o.createElement(m.a,{use:t,title:e.description})):o.createElement(y,f({},e))},b=function(e){switch(e.type){case r.AmazonMaturityRatingBadge:return o.createElement(v,f({},e));case r.LocalRatingBadge:return o.createElement(g,f({},e));default:return o.createElement(y,f({},e))}},E=function(){return(E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},w=function(e){return{src:e.imageSrc,alt:""}},_=function(e){return{image:w(e),url:e.href}},x=function(e){if(e.captions)return{text:e.captions}},N=function(e){if(e.subHeading)return{text:e.subHeading}},k=function(e){if(e.imdbRating)return{text:e.imdbRating}},O=function(e){if(e.releaseYear)return{text:e.releaseYear}},P=function(e){switch(e){case"atv.wps#AmazonMaturityRatingBadge":return r.AmazonMaturityRatingBadge;case"atv.wps#LocalRatingBadge":return r.LocalRatingBadge;default:return r.TextRatingBadge}},T=function(e){var t=e.regulatoryRatingBadge;if(t){var n=E({type:P(t.__type)},t);return delete n.__type,n}},R=function(e){if(e.watchlistAction)return{text:e.watchlistAction.text,tag:e.watchlistAction.tag.toLowerCase(),endpoint:e.watchlistAction.endpoint,ajaxEnabled:Boolean(Number(e.watchlistAction.ajaxEnabled))}},A=function(e){if(e.playbackAction){var t=e.playbackAction;return{playbackID:t.playbackID,href:t.href,text:t.text,entitlementText:t.entitlementText,resumeTime:t.resumeTime||0,progressPercentage:t.progress?100*t.progress:0,videoType:t.videoMaterialType||"",fallbackHref:t.fallbackHref}}},C=function(e){return{key:e.href,image:w(e),link:{name:e.name,url:e.href}}},L=function(e){if(e.metadata&&e.metadata.seeMore)return e.metadata.seeMore},B=function(e){var t=e.channel;if(t)return{customerEntitled:Boolean(Number(t.customerEntitled)),entitlementCue:t.entitlementCue,href:t.href}},S=function(e,t,n,r){return{type:"SEARCH_RESULT",title:{text:e.heading,url:e.href},packshot:_(e),captions:x(e),season:N(e),rating:k(e),year:O(e),regulatoryRatingBadge:T(e),synopsis:{text:e.synopsis},watchlistButton:R(e),playButton:A(e),withPrimeSign:Boolean(Number(e.withPrimeSign)),isCF:Boolean(0===t),isATF:Boolean(2===t||n<3&&t===n-1),channel:B(e),liveEvent:e.liveEvent,trailer:e.trailer,runtime:e.runtime,context:r}},I=function(e,t,n,r){switch(e.__type){case"atv.wps#SearchGenreCollection":return function(e,t,n){return{type:"NULL_RESULT",name:e.metadata&&e.metadata.name||"",seeMore:L(e),items:e.items.map(C),isCF:Boolean(0===t),isATF:Boolean(2===t||n<3&&t===n-1)}}(e,t,n.length);case"atv.wps#SearchCardCollection":return function(e,t,n){return{type:"FLEX_RESULT",name:e.metadata&&e.metadata.name||"",seeMore:L(e),items:e.items.map(function(t,r){return S(t,r,e.items.length,n)}),isCF:Boolean(0===t),isATF:!1}}(e,t,r);case"atv.wps#EntityCard":return function(e,t,n){return{type:"ENTITY_RESULT",title:{text:e.heading,url:e.href},packshot:_(e),isCF:Boolean(0===t),isATF:Boolean(2===t||n<3&&t===n-1)}}(e,t,n.length);case"atv.wps#SearchSeparator":return function(e){return{type:"SEARCH_SEPARATOR",text:e.text,withBottomBorder:Boolean(Number(e.withBottomBorder))}}(e);default:return S(e,t,n.length,r)}},j=function(e,t){if(e)return{items:e.map(function(e,n,r){return I(e,n,r,t)}),context:t}},H=(n("./node_modules/core-js/modules/web.dom.iterable.js"),function(){return(H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}),F=function(e){switch(e.__type){case"atv.wps#SearchSummaryLine":return function(e){return{type:"SUMMARY_LINE",text:e.text}}(e);default:return function(e){return{type:"APPLIED_FILTERS",filters:e.filters}}(e)}},M=function(e,t){return{id:e.id,text:t?e.breadcrumbName:e.name,href:t?e.breadcrumbHref:e.href}},D=function(e,t){return{type:"SINGLE",id:e.id,link:M(e,t),isApplied:Boolean(Number(e.isApplied)),params:H({refMarker:t?e.breadcrumbRefMarker:e.refMarker},e.queryToken&&{queryToken:e.queryToken},e.pageId&&{pageId:e.pageId},e.queryPageType&&{queryPageType:e.queryPageType})}},U=function(e){switch(e.__type){case"atv.wps#MultiFilter":return function(e){return{type:"MULTI",id:e.id,name:e.name,selection:e.selection,options:e.options.map(function(e){return D(e,!1)})}}(e);default:return D(e,!1)}},V=function(e){if(e){var t=e.filters?e.filters.map(U):[];return H({text:e.text,filters:t,selected:q(e)},e.primeFilter&&{primeFilter:D(e.primeFilter,!1)})}},q=function(e){var t,n=[];return e.filters&&e.filters.forEach(function(e){("atv.wps#MultiFilter"===e.__type?e.options:[e]).map(function(r){if(Boolean(Number(r.isApplied))){var a=D(r,!0);n.push(a),"p_n_theme_browse-bin"===e.id&&(t=a)}})}),{options:n,genre:t}},W=function(e,t,n,r){return{title:e,summary:{summaryItems:t?t.map(F):[]},refinement:V(r),searchType:n}},G=function(e,t,n){var r="NORMAL";return e&&e.items&&e.items.length&&(r=e.items.some(function(e){return e&&"atv.wps#SearchGenreCollection"===e.__type})?"NULL_SEARCH":"NORMAL"),{results:j(e.items,t),refine:W(e.title,e.summary,r,e.refinement),pagination:p(e.pagination),playerConfig:c(t),opts:Object.assign({},n,{totalItems:e.totalItems,refMarker:e.infiniteScrollRefMarker,isRetail:"Fogg"!==t.domain,isHighContrastCards:Boolean(Number(e.isHighContrastCards)),isHover2019:Boolean(Number(e.isHover2019))})}},z=function(e){var t=e.marketplaceId,n=e.customerId,r={__html:'\n    {\n      "source": "https://avodassets-a.akamaihd.net/playback/web_player/webplayer.js",\n      "useDefaultView": true,\n      "autoplay": false,\n      "playerConfig": {\n        "marketplaceId": "'+t+'",\n        "sessionId": "'+e.sessionId+'",\n        "customerId": "'+n+'",\n        "domElementId": "dv-web-player",\n        "locale": "'+e.locale+'",\n        "clientId": "47c62571-58c9-4572-9a75-52f68e019cea"\n      }\n    }\n    '};return o.createElement("div",null,o.createElement("script",{id:"av-tmpl-fill-spinner",type:"text/template",dangerouslySetInnerHTML:{__html:'<div class="av-spinner av-spinner--fill-height">\n    <img class="av-spinner__img"\n      src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" />\n    </div>'}}),o.createElement("script",{id:"av-tmpl-spinner",type:"text/template",dangerouslySetInnerHTML:{__html:'<div class="av-spinner"></div>'}}),o.createElement("div",{id:"dv-web-player"}),o.createElement("script",{id:"av-wconf-dv-web-player-cfg",type:"application/json",dangerouslySetInnerHTML:r}))},Y=n("./src/dvui/components/InfiniteScroll/InfiniteScroll.tsx"),Q=n("./src/dvui/components/Text/Text.tsx"),X=n("./src/dvui/components/Grid/Grid.tsx"),J=n("./src/dvui/components/Beard/Beard.tsx"),K=n("./src/dvui/components/Packshot/Packshot.tsx"),Z=function(e){var t=e.item;return o.createElement("span",{className:"dv-grid-beard-info"},t.channel.customerEntitled&&o.createElement(m.a,{className:"dv-grid-beard-entitled-tick",use:m.b.ENTITLED_TICK}),t.channel.entitlementCue)},$=n("./src/dvui/components/Common/constants.ts"),ee=n("./src/dvui/components/Logo/Logo.tsx"),te=function(){return(te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ne=function(e){return e.year&&!e.liveEvent},re=function(e){var t=e.item,n=e.isOtherEntitled;return o.createElement("span",{className:"dv-grid-beard-info"},t.withPrimeSign&&!n&&o.createElement(ee.a,{use:$.b.prime,className:"av-grid-beard-prime-logo"}),t.season&&o.createElement("span",null,t.season.text),t.rating&&o.createElement("span",null,"IMDb ",t.rating.text),Boolean(ne(t)&&function(e){return!Boolean(ne(e)&&e.rating&&e.regulatoryRatingBadge&&e.withPrimeSign&&e.season)}(t))&&o.createElement("span",null,t.year.text),t.regulatoryRatingBadge&&o.createElement(b,te({},t.regulatoryRatingBadge)))},ae=function(e){var t=e.liveEvent;return o.createElement("span",null,t.badge&&o.createElement(d.a,{use:d.b.LIVE},t.badge),t.dateTime&&o.createElement("span",{className:"dv-beard-title-date-time"},t.dateTime))},ie=function(e){var t=e.liveEvent;return o.createElement("span",{className:"dv-beard-badge"},o.createElement(d.a,{use:d.b.CRITICAL},t.disruption))},oe=n("./src/dvui/utils/tag-replacer/index.ts"),se=function(e){var t=e.href,n=e.playIconText,r=e.asin,a=e.videoType,i=e.resumeTime,s=e.fallbackHref;return o.createElement("a",{className:"av-play-icon js-deeplinkable",href:t,"data-asin":r,"data-title-id":r,"data-resume-time":i,"data-video-type":a,"data-fallback-url":s,dangerouslySetInnerHTML:{__html:Object(oe.a)(n)}})},ce=n("./src/util/csm/csm.ts"),le=function(e){var t="",n=0,r=function(){return n++?"&":"?"};for(var a in e)if(e.hasOwnProperty(a))switch(Object.prototype.toString.call(e[a])){case"[object Array]":for(var i in e[a])e[a].hasOwnProperty(i)&&(t+=""+r()+a+"[]="+encodeURIComponent(e[a][i]));break;case"[object Object]":for(var o in e[a])e[a].hasOwnProperty(o)&&(t+=""+r()+a+"["+o+"]="+encodeURIComponent(e[a][o]));break;default:t+=""+r()+a+"="+encodeURIComponent(e[a])}return t},ue=(h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),pe=function(e){function t(t){var n=e.call(this,t)||this;return n.submitForm=function(e){if(n.ajaxEnabled){n.setState({loading:!0}),e.preventDefault();var t=n.state.endpointQuery,r=le(t);fetch(n.state.endpointPartialURL,{credentials:"include",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"},body:r}).then(function(e){return e.json()}).then(function(e){var t=e.watchlistAction||!1;t&&t.endpoint&&n.setState({tag:t.tag.toLowerCase(),endpointPartialURL:t.endpoint.partialURL,endpointQuery:t.endpoint.query,loading:!1})}).catch(function(e){throw n.setState({tag:"add"===n.state.tag.toLowerCase()?"remove":"add",loading:!1}),new Error(e)})}},n.state={tag:t.tag,endpointQuery:t.endpoint.query,endpointPartialURL:t.endpoint.partialURL,loading:!1},n.ajaxEnabled=t.ajaxEnabled,n}return ue(t,e),t.prototype.queryAsHiddenInputs=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(o.createElement("input",{type:"hidden",name:n,defaultValue:e[n],key:n}));return t},t.prototype.render=function(){var e=this.state.endpointQuery,t=this.state.endpointPartialURL,n=this.state,r=n.loading,a=n.tag;return o.createElement("form",{onSubmit:this.submitForm,action:t,className:"av-grid-watchlist-toggle",method:"POST"},o.createElement("button",{"aria-label":this.state.tag,type:"submit",className:"av-grid-submit av-grid-btn-type-"+(r?"loading":a.toLowerCase())}),this.queryAsHiddenInputs(e))},t}(o.Component),me=n("./src/widgets/DVWebNodeHover/Hover/Hover.tsx"),de=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fe=function(){return(fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},he=function(e){function t(t){var n=e.call(this,t)||this;return n.state={index:t.index||0,item:t.item,titles:t.titles,className:t.className||"",isRetail:t.isRetail,isHighContrastCards:t.isHighContrastCards||!1,isHover2019:t.isHover2019||!1},n}return de(t,e),t.prototype.componentDidMount=function(){this.props.item.isCF?Object(ce.c)():this.props.item.isATF&&Object(ce.b)()},t.getDerivedStateFromProps=function(e){return{index:e.index||0,item:e.item,titles:e.titles,className:e.className||""}},t.prototype.render=function(){var e,t=this.state,n=t.index,r=t.item,a=t.titles,i=t.className,s=t.isRetail,c=t.isHighContrastCards,l=r.playButton?a[r.playButton.playbackID]:null,u=s&&r.channel,p=u&&!r.channel.customerEntitled&&!r.withPrimeSign,m=u&&r.channel.entitlementCue&&r.channel.customerEntitled,d=i+(p&&c?" retail-not-entitled":""),f={src:r.packshot.image.src,url:r.packshot.url,alt:r.title.text,overlay:Boolean(r.playButton&&!Object({__SERVER__:!1,__DEVSERVER__:!1,__ES6__:!0}).__NATIVEAPP__)?o.createElement(se,{href:l?l.playbackURL:null,playIconText:r.playButton.text,videoType:r.playButton.videoType,resumeTime:l?l.playbackResumeTime:null,asin:r.playButton.playbackID,fallbackHref:r.playButton.fallbackHref}):null,playPercent:l?l.playbackProgressPercentage:null},h={title:r.liveEvent?o.createElement(ae,{liveEvent:r.liveEvent}):o.createElement("a",{className:"av-beard-title-link",href:r.packshot.url},r.title.text),secondLine:r.liveEvent&&r.liveEvent.disruption?o.createElement(ie,{liveEvent:r.liveEvent}):o.createElement("span",null,r.channel&&r.channel.entitlementCue&&o.createElement("span",null,o.createElement(Z,{item:r})," "),o.createElement(re,{item:r,isOtherEntitled:m}))},v=o.createElement(J.a,fe({className:d+" av-grid-beard"},h,{key:"brd-"+n+(r.playButton?r.playButton.playbackID:""),actions:[r.watchlistButton?o.createElement(pe,fe({key:"wb-"+(r.playButton?r.playButton.playbackID:"")+"-"+n},r.watchlistButton)):""]}),o.createElement(K.a,fe({key:"pk-"+n+(r.playButton?r.playButton.playbackID:""),className:"av-grid-packshot"},f,{onError:function(e){e.target.onerror=null,e.target.src="https://m.media-amazon.com/images/G/02/AmazonVideo/smille-fb.svg"}})));return this.state.isHover2019?o.createElement("div",{className:"av-hover-wrapper"},o.createElement(me.a,{title:r.title.text,watchlistAction:r.watchlistButton,synopsis:r.synopsis.text,trailer:r.trailer,imdbRating:r.rating&&r.rating.text,placeholderClassName:"av-hover-placeholder",runtime:r.runtime,playbackAction:(e=r.playButton,e?{titleID:e.playbackID,videoMaterialType:e.videoType,resumeTime:e.resumeTime,href:e.href,progress:e.progressPercentage}:null)}," ",v)):v},t}(o.Component),ve=n("./src/dvui/components/Carousel/Carousel.tsx"),ye=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ge=function(e){function t(t){return e.call(this,t)||this}return ye(t,e),t.prototype.render=function(){var e=this.props,t=e.items.map(function(t,n){return o.createElement(ve.b,{key:"FlexCarouselItem-"+n},o.createElement(he,{index:n,item:t,titles:e.titles,isRetail:!1,isHighContrastCards:!1}))});return o.createElement("div",{className:"av-flex-carousel"},e.name&&o.createElement("div",{className:"av-flex-carousel-header"},e.name,e.seeMore&&o.createElement("a",{href:e.seeMore.href,className:"see-more-link"},e.seeMore.text)),o.createElement(ve.a,{className:"av-flex-carousel-items"},t))},t}(o.Component),be=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ee=function(e){function t(t){return e.call(this,t)||this}return be(t,e),t.prototype.componentDidMount=function(){this.props.isCF&&Object(ce.c)()},t.prototype.render=function(){var e=this.props,t=e.items.map(function(e,t){return o.createElement(ve.b,{key:t},o.createElement("a",{href:e.link.url,className:"genre-card"},o.createElement("span",{className:"genre-label"},e.link.name),o.createElement("img",{src:e.image.src,alt:e.link.name})))});return o.createElement("li",{className:"av-null-carousel"},e.name&&o.createElement("div",{className:"av-null-carousel-header"},e.name,e.seeMore&&o.createElement("a",{href:e.seeMore.href,className:"see-more-link"},e.seeMore.text)),o.createElement(ve.a,null,t))},t.defaultProps={name:"",isCF:!0},t}(o.Component),we=function(e){var t=e.id,n=e.children,r=e.checked;return o.createElement(o.Fragment,null,o.createElement("input",{type:"checkbox",defaultChecked:r||!1,id:t.replace(" ","_")}),o.createElement("label",{htmlFor:t.replace(" ","_")},n))},_e=n("./src/dvui/components/Link/Link.tsx"),xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ne=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isChecked:t.isApplied},n}return xe(t,e),t.prototype.handleChange=function(e){if(this.setState({isChecked:!this.state.isChecked}),this.props.onFilter)return e.preventDefault(),history.pushState(null,document.title,this.props.link.href),this.props.onFilter(this.props.params)},t.getDerivedStateFromProps=function(e){return{isChecked:Boolean(Number(e.isApplied))}},t.prototype.render=function(){var e=this.props,t=this.state;return o.createElement("li",{className:"av-s-refine-drop-section-drop-item"},o.createElement("input",{type:"inclusive"===e.selection?"checkbox":"radio",id:e.id,name:e.name,checked:t.isChecked}),o.createElement("label",{htmlFor:e.id},o.createElement(_e.a,{href:e.link.href,onClick:this.handleChange.bind(this)},o.createElement("div",{className:"av-s-drop-blk "+("inclusive"===e.selection?"av-s-drop-chk":"")},o.createElement("span",{className:"av-s-span"},e.link.text)))))},t}(o.Component),ke=function(){return(ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Oe=function(e){var t=e.id,n=e.name,r=e.options,a=e.selection,i=e.onFilter,s=e.isRetail,c=r.map(function(e){return o.createElement(Ne,ke({key:e.id,name:t||n,selection:a},e,{onFilter:i}))});return o.createElement("li",{className:"av-s-refine-drop-section "+(s?"av-s-rtl":"av-s-fgg")},o.createElement(we,{id:"av-s-droptag-"+t,checked:!s},n),o.createElement("ul",{className:"av-s-refine-drop-section-drop"},c))},Pe=function(){return(Pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Te=function(e){var t=e.filters,n=e.selected,r=e.onFilter,a=e.isRetail,i=e.text,s=t.map(function(e){return o.createElement(Oe,Pe({key:e.id,isRetail:a},e,{onFilter:r}))});return o.createElement("div",{className:"av-s-filters-dropdown"},o.createElement(we,{id:"av-s-droptag"},i||"Filters"," ",n?"("+n+")":""),o.createElement("ul",{className:"av-s-refine-drop"},s))},Re=function(){return(Re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Ae=function(e){var t=e.summaryItems.map(function(e,t){return"SUMMARY_LINE"===e.type?o.createElement("div",{key:t},o.createElement(Q.a,{string:e.text,tag:"p"})):null});return o.createElement("div",{className:"av-refine-bar-summaries"},t)},Ce=function(e){var t=e.summary,n=e.refinement,r=e.searchType,a=e.opts;return o.createElement("section",{className:"av-refine-bar",id:"av-refine-bar"},o.createElement("div",{className:"av-refine-bar-container"+("NULL_SEARCH"===r?"-nullsearch":"")},o.createElement(Ae,Re({},t)),n&&n.filters&&Boolean(n.filters.length)&&Boolean(n.filters[0].options.length>1)&&o.createElement(Te,Re({},n,{isRetail:a.isRetail,text:n.text,selected:n.selected.options.length}))))},Le=n("./src/dvui/components/Toggle/Toggle.tsx"),Be=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Se=function(){return(Se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Ie=function(e){function t(n){var r=e.call(this,n)||this;return r.state={title:t.getTitle(n),refinement:n.refinement},r}return Be(t,e),t.getTitle=function(e){return e.title?e.title:e.opts.phrase?'"'+e.opts.phrase+'"':""},t.getDerivedStateFromProps=function(e){return{title:t.getTitle(e),refinement:e.refinement}},t.prototype.render=function(){var e=this.props,t=e.opts,n=e.onFilter,r=this.state,a=r.title,i=r.refinement;return o.createElement("section",{className:"av-s-header-retail"},o.createElement("div",{className:"av-s-container"},a&&o.createElement("div",{className:"av-s-head-title"},o.createElement(Q.a,{string:a})),o.createElement("div",{className:"av-s-snd"},o.createElement("div",{className:"av-s-snd-left"},i&&i.selected.options.map(function(e){if(!i.primeFilter||e.id!==i.primeFilter.id)return o.createElement("a",{className:"av-s-selectbox",key:e.id,href:e.link.href,onClick:function(t){n&&(t.preventDefault(),history.pushState(null,document.title,e.link.href),n(e.params))}},e.link.text)})),o.createElement("div",{className:"av-s-snd-right"},i&&i.primeFilter&&o.createElement("div",{className:"av-s-head-prime-toggle"},o.createElement(ee.a,{use:$.b.prime,className:"av-s-logo-toggle"}),o.createElement(Le.a,{checked:i.primeFilter.isApplied,dark:!0,onChange:function(){n&&(history.pushState(null,document.title,i.primeFilter.link.href),n(i.primeFilter.params))}})),i&&i.filters&&Boolean(i.filters.length)&&!(Boolean(1===i.filters.length)&&Boolean(i.filters[0].options.length<=1))&&o.createElement(Te,Se({},i,{selected:i.selected.options.length,isRetail:t.isRetail,onFilter:n}))))))},t}(o.Component),je=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),He=function(){return(He=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Fe=function(e){function t(t){var n=e.call(this,t)||this;return n.state={index:t.index||0,item:t.item,className:t.className||""},n}return je(t,e),t.prototype.componentDidMount=function(){this.props.item.isCF?Object(ce.c)():this.props.item.isATF&&Object(ce.b)()},t.getDerivedStateFromProps=function(e){return{index:e.index||0,item:e.item,className:e.className||""}},t.prototype.render=function(){var e=this.state,t=e.index,n=e.item,r=e.className,a={src:n.packshot.image.src,url:n.packshot.url},i={title:o.createElement("a",{className:"av-beard-title-link",href:n.packshot.url},n.title.text)};return o.createElement(J.a,He({className:r+" av-grid-beard"},i,{key:"brd-"+t,actions:[]}),o.createElement(K.a,He({key:"pk-"+t,className:"av-grid-packshot"},a,{onError:function(e){e.target.onerror=null,e.target.src="https://m.media-amazon.com/images/G/02/AmazonVideo/smille-fb.svg"}})))},t}(o.Component),Me=n("./src/util/api/WPSClient.ts"),De=n("./src/util/logger/logger.ts"),Ue=function(e,t,n,r,a){var i=new De.a;e.StorefrontEnrichItems({pTitleIDs:[t],context:n}).then(function(e){var n=e&&e.enrichments&&e.enrichments[t],i=Ve(n),o=n&&n.progress&&n.progress.percentage,s=qe(r.playbackURL,r.playbackResumeTime,i);a({playbackURL:s,playbackResumeTime:We(i)?i:r.playbackResumeTime,playbackProgressPercentage:We(o)?o:r.playbackProgressPercentage})}).catch(function(e){i.error(e).count("AVSearchEnrichAjaxErrors",1,!0)})},Ve=function(e){if(e&&e.playbackAction){var t=e.playbackAction.resumeTime;return"string"==typeof t?parseInt(t,10):t}return null},qe=function(e,t,n){if(!e)return null;if(!We(t)||!We(n))return e;var r="t="+t,a="t="+n;return e.replace("?"+r,"?"+a).replace("&"+r,"&"+a)},We=function(e){return Boolean(e)||0===e},Ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ze=function(){return(ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Ye=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((r=r.apply(e,t||[])).next())})},Qe=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Xe=function(e){var t=e.cards,n=e.infiniteScrollEnabled,r=e.trigger,a=e.isLoading,i=void 0!==a&&a;return o.createElement("div",{className:"av-grid-wrapper"},o.createElement(X.a,{className:"av-search-grid "+(i?"av-s-g-blur":"av-s-g-clear")+" "},t),n&&o.createElement(Y.a,{triggerPoint:240,trigger:r}))},Je=function(e){function t(t){var n=e.call(this,t)||this;n.updateTitle=function(e){var t=n,r=t.props,a=t.state,i=a.titles[e];i&&Ue(n.wpsClient,e,r.context,i,function(t){var r;n.setState({titles:ze({},a.titles,(r={},r[e]=t,r))})})},n.getFilteredPage=function(e){return Ye(n,void 0,void 0,function(){var t,n,r,a,i,o,s,c,l,u;return Qe(this,function(p){switch(p.label){case 0:n=(t=this).props,r=t.state,a=t.wpsClient,this.setState({isLoading:!0,opts:Object.assign({},this.state.opts,e)}),p.label=1;case 1:if(p.trys.push([1,3,,4]),!e)throw new Error("Missing Params on Filter");return i=this.buildNewContextParameters(n.context,e),o=Object.assign({},r.opts,{startIndex:0,context:i,queryToken:e.queryToken||"",pageId:e.pageId||"",queryPageType:e.queryPageType||"",ie:"UTF8"}),Object.keys(o).forEach(function(e){return!1===Boolean(o[e])&&delete o[e]}),[4,a.Search(o)];case 2:return s=p.sent(),c=G(s,i,o),l=this.countSearchResult(c.results.items),n.logger.count("DVWebNodeSearchFiltered",1,!0),this.setState({infiniteScrollEnabled:Boolean(l<c.opts.totalItems),items:c.results.items,startIndex:this.normalizeStartIndex(l),titles:this.enrichTitles(c.results.items),opts:Object.assign({},this.state.opts,c.opts),refine:c.refine,isLoading:!1}),[3,4];case 3:return u=p.sent(),this.setState({infiniteScrollEnabled:!1,isLoading:!1}),n.logger.error(u),[3,4];case 4:return[2]}})})},n.getNextPage=function(){return Ye(n,void 0,void 0,function(){var e,t,n,r,a,i,o,s,c,l,u,p;return Qe(this,function(m){switch(m.label){case 0:t=(e=this).props,n=e.wpsClient,r=e.state,a=this.buildNewContextParameters(t.context,r.opts),m.label=1;case 1:return m.trys.push([1,3,,4]),i=Object.assign({},r.opts,{startIndex:r.startIndex,context:a,queryToken:r.opts.queryToken,pageId:r.opts.pageId,queryPageType:r.opts.queryPageType,ie:"UTF8"}),Object.keys(i).forEach(function(e){return!1===Boolean(i[e])&&delete i[e]}),[4,n.Search(i)];case 2:return o=m.sent(),s=G(o,a,i),c=r.items.concat(s.results.items),l=this.enrichTitles(c),u=this.normalizeStartIndex(r.startIndex+this.countSearchResult(s.results.items)),t.logger.count("DVWebNodeSearchInfiniteScroll",1,!0),this.setState({infiniteScrollEnabled:Boolean(u<t.opts.totalItems)&&Boolean(s.results.items.length),opts:Object.assign({},this.state.opts,s.opts),refine:s.refine,titles:l,items:c,startIndex:u}),[3,4];case 3:return p=m.sent(),this.setState({infiniteScrollEnabled:!1}),t.logger.error(p),[3,4];case 4:return[2]}})})};var r=n.normalizeStartIndex(t.opts.startIndex+n.countSearchResult(t.items));return n.state={titles:n.enrichTitles(t.items),items:t.items,infiniteScrollEnabled:Boolean(r<t.opts.totalItems),opts:t.opts,refine:t.refine,isLoading:!1,startIndex:r},n.wpsClient=new Me.a,n.getFilteredPageBind=n.getFilteredPage.bind(n),n.getNextPageBind=n.getNextPage.bind(n),n}return Ge(t,e),t.prototype.countSearchResult=function(e){return e.filter(function(e){return"SEARCH_RESULT"===e.type}).length},t.prototype.normalizeStartIndex=function(e){return 20*Math.ceil(e/20)},t.prototype.enrichTitle=function(e,t){if(t.playButton){var n=t.playButton;e[n.playbackID]={playbackURL:n.href,playbackResumeTime:n.resumeTime,playbackProgressPercentage:n.progressPercentage}}return e},t.prototype.enrichTitles=function(e){var t=this;return e.reduce(function(e,n){if("SEARCH_RESULT"===n.type)t.enrichTitle(e,n);else if("FLEX_RESULT"===n.type){n.items.forEach(function(n){return t.enrichTitle(e,n)})}return e},{})},t.prototype.getFirstItemType=function(){var e=this.state;return e.items&&e.items.length&&e.items[0]?e.items[0].type:null},t.prototype.renderRefine=function(){var e=this.state;return e.refine?e.opts.isRetail?o.createElement(Ie,ze({},e.refine,{opts:e.opts,onFilter:this.getFilteredPageBind})):o.createElement(Ce,ze({},e.refine,{opts:e.opts})):null},t.prototype.render=function(){var e=this.state,t=e.items.map(function(t,n){var r=n+"-"+t.type;if("NULL_RESULT"===t.type)return o.createElement(Ee,ze({},t,{key:r}));if("FLEX_RESULT"===t.type){var a=Object.assign({},t,{titles:e.titles});return o.createElement(ge,ze({},a,{key:r}))}if("ENTITY_RESULT"===t.type)return o.createElement(Fe,{key:r,index:n,item:t});if("SEARCH_SEPARATOR"===t.type){var i=t,s="av-result-cards-heading"+(i.withBottomBorder?" av-result-cards-heading-border-bottom":"");return o.createElement("div",{key:r,className:s},o.createElement(Q.a,{string:i.text,tag:"h2"}))}return"SEARCH_RESULT"===t.type?o.createElement(he,{key:r,index:n,item:t,titles:e.titles,isRetail:e.opts.isRetail,isHighContrastCards:e.opts.isHighContrastCards,isHover2019:e.opts.isHover2019}):null});if("NULL_RESULT"===this.getFirstItemType()){var n=t.slice(0,2);return o.createElement(o.Fragment,null,this.renderRefine(),o.createElement("div",{className:"av-result-cards"},n,o.createElement(Xe,{cards:t.slice(2,t.length-1),infiniteScrollEnabled:!1})))}if(e.items&&e.items.length&&e.items.some(function(e){return"FLEX_RESULT"===e.type})){var r=t.reduce(function(t,n,r){n&&t["SEARCH_RESULT"===e.items[r].type?1:0].push(n);return t},[[],[]]),a=r[0],i=r[1],s=i.length>0;return o.createElement("div",{className:"av-flex-result-cards"},a,s&&this.renderRefine(),s&&o.createElement(Xe,{cards:i,isLoading:this.state.isLoading,infiniteScrollEnabled:this.state.infiniteScrollEnabled}))}return o.createElement(o.Fragment,null,this.renderRefine(),o.createElement(Xe,{cards:t,isLoading:this.state.isLoading,infiniteScrollEnabled:this.state.infiniteScrollEnabled,trigger:this.getNextPageBind}))},t.prototype.componentDidMount=function(){var e,t;e=this.updateTitle,t=function(t){t&&!t.trailer&&t.asin&&e(t.asin)},window.P&&window.P.when("dv-player-integration").execute(function(e){e.on("closed",t),e.on("asinChanged",t)})},t.prototype.buildNewContextParameters=function(e,t){return Object.assign(e,{parameters:Object.assign(e.parameters,{queryToken:{value:t.queryToken||"",__type:"atv.wps#QueryStringValue"},pageId:{value:t.pageId||"",__type:"atv.wps#QueryStringValue"},queryPageType:{value:t.queryPageType||"",__type:"atv.wps#QueryStringValue"},ref_:{value:t.refMarker||"",__type:"atv.wps#QueryStringValue"}})})},t}(o.Component),Ke=function(){return(Ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Ze=function(e){return o.createElement("li",{className:"av-pagination-page-number"+(e.isOptional?" av-pagination-optional":"")},o.createElement("a",{className:"av-button av-button--default",href:e.href},o.createElement("span",null,e.text),o.createElement("span",{className:"avu-screen-reader-only"},e.title)))},$e=function(e){return o.createElement("li",{className:"av-pagination-current-page"},o.createElement("a",{className:"av-button av-button--default av-disabled",href:"#"},o.createElement("span",null,e.text),o.createElement("span",{className:"avu-screen-reader-only"},e.title)))},et=function(e){return o.createElement("li",{className:"av-pagination-previous-page"},o.createElement("a",{className:"av-button av-button--default av-prev-next",href:e.href}," ",o.createElement("span",{className:"av-pagination-arrow"},"◄"),o.createElement("span",{className:"avu-screen-reader-only"},e.title)))},tt=function(e){return o.createElement("li",{className:"av-pagination-next-page"},o.createElement("a",{className:"av-button av-button--default av-prev-next",href:e.href}," ",o.createElement("span",{className:"av-pagination-arrow"},"►"),o.createElement("span",{className:"avu-screen-reader-only"},e.title)))},nt=function(){return o.createElement("li",{className:"av-pagination-page-gap"},o.createElement("a",{className:"av-button av-button--default av-disabled av-pagination-ellipsis",href:"#","aria-hidden":"true",role:"presentation",tabIndex:-1},o.createElement("span",null,"…")))},rt=function(e){var t=e.paginators.map(function(e,t){switch(e.type){case"CurrentPage":return o.createElement($e,Ke({key:t},e));case"PreviousPage":return o.createElement(et,Ke({key:t},e));case"NextPage":return o.createElement(tt,Ke({key:t},e));case"PageGap":return o.createElement(nt,Ke({key:t},e));default:return o.createElement(Ze,Ke({key:t},e))}});return o.createElement("ol",{id:"av-pagination",className:"av-pagination av-space-large"},t)},at=function(e){var t=e.paginator;return o.createElement(rt,{paginators:t})},it=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ot=function(){return(ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};n("./src/widgets/DVWebNodeSearch/index.module.scss");var st=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isJavascriptEnabled:!1},n}return it(t,e),t.prototype.render=function(){var e=this.props,t=e.results,n=e.refine,r=e.pagination,a=e.playerConfig,i=e.opts,s=e.logger;return o.createElement(o.Fragment,null,a&&o.createElement(z,ot({},a)),o.createElement(Je,ot({logger:s},t,{refine:n,opts:i})),r&&!this.state.isJavascriptEnabled&&o.createElement(at,ot({},r)))},t.prototype.componentDidMount=function(){this.setState({isJavascriptEnabled:!0}),window&&window.addEventListener("popstate",function(){window.location.href=window.location.href}),window&&window.P&&(window.P.when("av-register-once").execute(function(e){e("av-ui-templates-ready")}),window.P.when("av-widget-config").execute(function(e){e.declare("dv-web-player-cfg")}))},t}(o.Component),ct={name:"search",getProps:void 0,Component:Object(s.c)(st),container:{tagName:"section",ID:"av-search",classes:["av-search"]}};Object(i.a)(ct)},"./src/widgets/DVWebNodeHover/Hover/Hover.module.scss":function(e,t,n){e.exports={firstLine:"_2llKhU",preFirstLine:"_3x9v6X",additionalIcons:"_3WnbK_",synopsis:"_2kHS4a",tailContent:"EUAigm",tailText:"_2EhGQR"}},"./src/widgets/DVWebNodeHover/Hover/Hover.tsx":function(e,t,n){"use strict";var r,a=n("./node_modules/react/index.js"),i=n("./node_modules/classnames/index.js"),o=n("./src/widgets/DVWebNodeHover/Hover/Hover.module.scss"),s=n("./src/util/api/APIClient.ts"),c=n("./src/util/api/util.ts"),l=n("./src/dvui/components/Icon/Icon.tsx"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){return"remove"==e.toLowerCase()},m=function(e){var t="",n=0,r=function(){return n++?"&":"?"};for(var a in e)if(e.hasOwnProperty(a))switch(Object.prototype.toString.call(e[a])){case"[object Array]":for(var i in e[a])e[a].hasOwnProperty(i)&&(t+=""+r()+a+"[]="+encodeURIComponent(e[a][i]));break;case"[object Object]":for(var o in e[a])e[a].hasOwnProperty(o)&&(t+=""+r()+a+"["+o+"]="+encodeURIComponent(e[a][o]));break;default:t+=""+r()+a+"="+encodeURIComponent(e[a])}return t},d=function(e){function t(t){var n=e.call(this,t)||this;return n.sendToggleRequest=function(){if(n.ajaxEnabled){var e=n.state.endpointQuery,t=m(e);(new s.a).call(n.state.endpointPartialURL,{credentials:"include",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"},body:t}).then(function(e){var t=e.watchlistAction||!1;t&&t.endpoint&&n.setState({text:t.text,endpointPartialURL:t.endpoint.partialURL,endpointQuery:t.endpoint.query,isOnWatchlist:p(t.tag)})}),n.buttonRef.current.blur()}},n.state={isOnWatchlist:t&&t.watchlistAction&&p(t.watchlistAction.tag),endpointPartialURL:t&&t.watchlistAction&&t.watchlistAction.endpoint.partialURL,endpointQuery:t&&t.watchlistAction&&t.watchlistAction.endpoint.query,hasMounted:!1},n.ajaxEnabled=t&&t.watchlistAction&&Object(c.f)(t.watchlistAction.ajaxEnabled),n.sendToggleRequest=n.sendToggleRequest.bind(n),n.buttonRef=a.createRef(),n}return u(t,e),t.prototype.componentDidMount=function(){this.setState({hasMounted:!0})},t.prototype.render=function(){if(!this.state.endpointPartialURL)return null;var e=this.state.text&&this.state.text.string||this.props.watchlistAction&&this.props.watchlistAction.text&&this.props.watchlistAction.text.string;return a.createElement("button",{onClick:this.sendToggleRequest,"aria-label":e,ref:this.buttonRef}," ",this.state.isOnWatchlist?a.createElement(l.a,{use:l.b.WATCHLIST_ON}):a.createElement(l.a,{use:l.b.ADD}))},t}(a.Component),f=n("./src/dvui/components/Text/Text.tsx"),h=n("./src/widgets/DVWebNodeHover/Hover/Infobox.module.scss"),v=function(e){return a.createElement("div",{className:h.Infobox},a.createElement(f.a,{string:e.message}))},y=n("./src/dvui/components/Badge/Badge.tsx"),g=n("./src/dvui/components/Hover/Hover.tsx"),b=n("./src/dvui/components/Tooltip/Tooltip.tsx"),E=n("./src/widgets/DVWebNodeHover/Hover/Tooltip.module.scss"),w=function(e){var t=a.createElement("span",{className:E.TooltipText},e.text);return a.createElement(b.a,{content:t,position:"top",size:"l"},e.children)},_=n("./src/widgets/DVWebNodeHover/Hover/PlaybackBlock/ProgressBar.module.scss"),x=function(e){var t=e.progress;return t||0===t?a.createElement("div",{className:_.progressBarContainer},a.createElement("div",{className:_.ProgressBar},a.createElement("div",{style:{width:t+"%"}}))):null},N=n("./src/widgets/DVWebNodeStorefront/shared/components/collection/FacetedCarousel/Card/Packshot/PlayButton.tsx"),k=n("./src/widgets/DVWebNodeHover/Hover/PlaybackBlock.module.scss"),O=function(e){var t=e.playbackAction,n=e.children;return a.createElement("a",{"data-asin":t&&t.titleID,"data-ref-tag":t&&t.refMarker,"data-ref":t&&t.refMarker,"data-resume-time":t&&(t.resumeTime||"0"),href:t.href,"data-video-type":t&&t.videoMaterialType,"data-session-id":t&&t.sessionID,"data-fallback-url":t&&t.appFallbackUrl},n)},P=function(e){var t=e.playbackAction;return a.createElement(a.Fragment,null,a.createElement(O,{playbackAction:t},a.createElement(N.a,{wrapperStyle:k.playButton,circleStyle:k.circle,triangleStyle:k.triangle,svgStyle:k.svg})),a.createElement("div",{className:k.playResumeInfo},a.createElement("h1",{className:k.playbackLabel},t.playbackLabel),a.createElement(x,{progress:t.progress})))},T=n("./src/widgets/DVWebNodeHover/Hover/ReviewsRating.module.scss"),R=function(e){var t,n,r=e.rating,o=e.className,s=(n=r)>5?5:n<.5?.5:Math.round(2*n)/2,c=[T.one,T.two,T.three,T.four],u=Boolean(2*s%2),p=c[Math.ceil(s)-1];return a.createElement(l.a,{use:l.b.AMAZON_RATING,className:i(T.rating,o,p,(t={},t[T.hasHalfStar]=u,t))})};n.d(t,"a",function(){return B});var A=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(){return(C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},L=function(e){var t=e.trailer,n=e.children;return a.createElement("a",{href:t.playbackURL,"data-page-title-id":t.playbackID,"data-video-type":t.videoMaterialType,"data-use-full-view":"true","data-is-trailer":"true","data-title-id":t.playbackID,"data-ux-click":"true"},n)},B=function(e){function t(t){return e.call(this,t)||this}return A(t,e),t.prototype.render=function(){var e=this.props.currentBookmarkLabel||this.props.title,t=this.props.watchlistAction&&C({},this.props.watchlistAction,{text:this.props.watchlistAction.text}),n=this.props.liveBadgeLabel&&a.createElement("div",{className:o.preFirstLine},a.createElement(y.a,{className:o.tailContent,use:y.b.LIVE},this.props.liveBadgeLabel)),r=a.createElement("div",{className:i(o.firstLine,"deeplinkable")},n,this.props.playbackAction&&a.createElement(P,{playbackAction:C({},this.props.playbackAction,{playbackLabel:this.props.playbackAction.playbackLabel||e})}),a.createElement("div",{className:o.additionalIcons},this.props.trailer&&a.createElement(L,{trailer:this.props.trailer},a.createElement(l.a,{use:l.b.TRAILER,className:o.tailContent})),t&&a.createElement(w,{text:t.text.string},a.createElement(d,{watchlistAction:t})))),s=a.createElement("p",{className:o.synopsis},this.props.synopsis),c=this.props.infoboxes&&this.props.infoboxes.map(function(e){return a.createElement(v,C({},e))}),u=a.createElement(a.Fragment,null,s,c),p=a.createElement("div",null,this.props.amazonReviews&&a.createElement(R,{rating:this.props.amazonReviews,className:o.tailContent}),this.props.imdbRating&&a.createElement("span",{className:i(o.tailContent,o.tailText)},"IMDb ",this.props.imdbRating),this.props.runtime&&a.createElement("span",{className:i(o.tailContent,o.tailText)},this.props.runtime),this.props.releaseYear&&a.createElement("span",{className:i(o.tailContent,o.tailText)},this.props.releaseYear),this.props.hasSubtitles&&a.createElement(l.a,{use:l.b.SUBTITLES,className:o.tailContent}),this.props.maturityRating&&a.createElement(y.a,{use:y.b.REGULATORY_RATING,className:o.tailContent},this.props.maturityRating.rating));return a.createElement(g.a,{firstLine:r,secondLine:u,thirdLine:p,className:this.props.className,placeholderClassName:this.props.placeholderClassName,onMouseLeave:this.props.onMouseLeave,onMouseOver:this.props.onMouseOver},this.props.children)},t}(a.Component)},"./src/widgets/DVWebNodeHover/Hover/Infobox.module.scss":function(e,t,n){e.exports={Infobox:"_3H6NzE"}},"./src/widgets/DVWebNodeHover/Hover/PlaybackBlock.module.scss":function(e,t,n){e.exports={playButton:"N8BdSd",svg:"_3FAc5g",circle:"_3Pl5Dt",triangle:"_14me7U",playResumeInfo:"_9Ad1-d",playbackLabel:"_1Wf6Gn"}},"./src/widgets/DVWebNodeHover/Hover/PlaybackBlock/ProgressBar.module.scss":function(e,t,n){e.exports={progressBarContainer:"_1HdDm-",ProgressBar:"_3chP0r"}},"./src/widgets/DVWebNodeHover/Hover/ReviewsRating.module.scss":function(e,t,n){e.exports={rating:"Ne26Eo",hasHalfStar:"_3fP0wE",one:"_39BfCv",two:"_2Z0VKo",three:"_1OBVBp",four:"_2fG_UI"}},"./src/widgets/DVWebNodeHover/Hover/Tooltip.module.scss":function(e,t,n){e.exports={TooltipText:"o-fL3o"}},"./src/widgets/DVWebNodeSearch/index.module.scss":function(e,t,n){e.exports={"nav-asset-v1-0-0-12":"_15am_9"}},"./src/widgets/DVWebNodeStorefront/shared/components/collection/FacetedCarousel/Card/Packshot/PlayButton.tsx":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js");t.a=function(e){var t=e.wrapperStyle,n=e.svgStyle,a=e.circleStyle,i=e.triangleStyle;return r.createElement("div",{className:t},r.createElement("svg",{className:n,viewBox:"0 0 36 36"},r.createElement("circle",{className:a,cx:"18",cy:"18",r:"17"}),r.createElement("path",{className:i,d:"M14.6821364,10.8388295 C14.0320227,10.4648523 13.4998636,10.7726932 13.4998636,11.5226932 L13.4998636,24.4772386 C13.4998636,25.2272386 14.0320227,25.5350795 14.6821364,25.1611023 L25.9542955,18.6797386 C26.6044091,18.3057614 26.6044091,17.6941705 25.9542955,17.3201932 L14.6821364,10.8388295 Z"})))}},url:function(e,t){e.exports=url}});
//# sourceMappingURL=https://m.media-amazon.com/images/G/01/dvwebnode/assets/search.8c0bc13354c541845001.js.map